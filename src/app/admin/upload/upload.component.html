<div class="spinner" *ngIf="isLoading">
  <mat-spinner></mat-spinner>
</div>
<h1 fxLayout="row" fxLayoutAlign="center">Welcome, Olga!</h1>

<form novalidate fxLayout="column" fxLayoutAlign="center" [formGroup]="form">
  <mat-form-field appearance="legacy">
    <mat-label>Name</mat-label>
    <input matInput placeholder="Enter name" type="text" formControlName="title">
    <mat-icon matSuffix>sentiment_very_satisfied</mat-icon>
  </mat-form-field>

  <mat-form-field appearance="legacy">
    <mat-label>Description</mat-label>
    <input matInput placeholder="Enter description" type="text" formControlName="description">
  </mat-form-field>

  <mat-form-field appearance="legacy">
    <mat-label>Orientation</mat-label>
    <select matNativeControl required formControlName="orientation">
      <option value="horizontal">Horizontal</option>
      <option value="vertical">Vertical</option>
    </select>
  </mat-form-field>

  <button type="button" mat-raised-button
          [disabled]="form.invalid"
          (click)="selectImage()"
  >Choose File</button>
<!--  <input hidden (change)="onFileSelected()" #fileInput type="file" id="file">-->

  <button type="button" mat-raised-button color="primary"
          [disabled]="!fileName || !fileOriginalSize || !fileAfterCompressSize"
          (click)="uploadAndSaveFileData()"
  >Upload</button>
</form>

<ng-container *ngIf="fileName && fileOriginalSize && fileAfterCompressSize">
  <table>
    <thead>
    <tr>
      <th>Name</th>
      <th>Original size</th>
      <th>Compress size</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td>{{fileName}}</td>
      <td>{{fileOriginalSize}} </td>
      <td>{{fileAfterCompressSize}}</td>
    </tr>
    </tbody>

  </table>
</ng-container>

<ng-container *ngIf="collectionImages$ | async as images;">
  <table class="list">
    <tbody>
      <tr *ngFor="let image of images">
        <td>{{image.title}}</td>
        <td>
          <mat-icon (click)="delete(image)">delete</mat-icon>
        </td>
      </tr>
    </tbody>
  </table>
</ng-container>

